## 排列

### 定义

一般的，从 $n$ 个不同元素中取出 $m(m\leqslant n)$ 个元素，按照一定的顺序排成一列，叫做从 $n$ 个不同元素中取出 $m$ 个元素的一个 **排列(`arrangement`)**.

### 公式

$A_n^m = n(n-1)(n-2) \cdots (n-m+1) = \frac{n!}{(n-m)!}, n,m \in \N_+, m \leqslant n$

引申

当 $m=n, A_n^m = n!$ 全排列。含义是 **$n$ 中取 $n$ 个**（1种方法）乘以 **$n$ 个排一排** ( $A_n^n$ 种方法) （次序） 

### 应用题类型

1. 分类数数问题

    解题方法：分类穷举(树状图穷举)

2. 限制条件问题（重点）

    解题方法：分类讨论法，作图相减法，插队法

    1. 分类讨论法步骤：

        1. 分清元素，位置，条件，限制。其中限制一般写成 **元素** 不在 **位置** 上的形式
        2. 决定从元素还是位置开始讨论，原则上从数量少的开始
        3. 决定从哪个元素、位置开始讨论，原则上从限制最多的开始
        4. 从限制最多 $\rightarrow$ 限制次多 $\rightarrow$ 次次多 $\rightarrow \cdots \rightarrow$ 余下 

    2. 作图相减法步骤：

        1. 不看限制，作全集 $I$
        2. 看所有限制，作限制集 $S$
        3. $I-S$

    3. 插队法步骤

        1. 处理无限制元素
        2. 插入有限制元素


3. 插书问题



## 组合

### 定义

从 $n$ 个不同元素中取出 $m(m\leqslant n)$ 个元素的所有不同组合的个数，叫做从 $n$ 个不同元素中取出 $m$ 个元素的 **组合数(`combination`)**，用符号 $C_n^m$ 表示。

### 公式

$C_n^m = \frac{A_n^m}{A_m^m} = \frac{n!}{m!(n-m)!}, n,m \in \N_+, m \leqslant n$

### 引申公式

* $C_n^0 = C_n^n = 1$
* $C_n^m = C_n^{n-m}$
* $C_{n+1}^m = C_n^m + C_n^{m-1}$



### $C_{n+1}^m = C_n^m + C_n^{m-1}$ 口诀

正用： **n 降 m 降不降**。如 $C_7^4 = C_6^3 + C_6^4$

反用： 条件为 n 相同，m 差 1。口诀：**n + 1, m 取大**。如 $C_5^2 + C_5^3 = C_6^3$ 

### $C_{n+1}^m = C_n^m + C_n^{m-1}$ 的证明：

$$
\begin{align}
C_n^m + C_n^{m-1} & = \frac{n!}{m!(n-m)!} + \frac{n!}{(m-1)!(n-m+1)!} \\
& = \frac{n!(n-m+1)}{m!(n-m)!(n-m+1)} + \frac{n!m}{(m-1)!(n-m+1)!m} \\
& = \frac{n!(n-m+1)}{m!(n-m+1)!} + \frac{n!m}{m!(n-m+1)!} \\
& = \frac{n!(n-m+1+m)}{m!(n-m+1)!} \\
& = \frac{n!(n+1)}{m!(n-m+1)} \\
& = \frac{(n+1)!}{m!(n+1-m)!} \\
& = C_{n+1}^m
\end{align}
$$

解释：

$C_{n+1}^m$ 指从 $n+1$ 个元素内取出 $m$ 个的组合数。对任意一个元素而言，分为被选中和未被选中两种情况。被选中时，相当于从剩下的 $n$ 个元素中再选择 $m-1$ 个元素即 $C_n^{m+1}$；未被选中时，相当于从剩下的 $n$ 个元素内选择 $m$ 个元素即 $C_n^m$。两种情况互不影响且完备无漏，适用分类加法计数原理，即 $C_{n+1}^m = C_n^m + C_n^{m-1}$

### 应用题类型

1. 分类数数

    分类原则：**不重不漏**

    数数原则：**数少求多**

    重： $\exists a, \text{s.t.} a \in A, a \in B$

    漏： $\exists a, \text{s.t.} a \notin A, a \notin B$

2. 分组排序

    类型一、

    1. 若每组元素个数一样，则称为**平均分组**

        平均分组问题当我们取取取时，分组排序同时完成

        例：把 6 个人分成 3 组，每组 2 人，有几种分法。

        可以先从6取2，再从4取2，再从2取2，即 $C_6^2 C_4^2 C_2^2$，由于每个分组元素个数一样，我们既完成了分组，又完成了排序。


    2. 若每组元素个数不同，则称为**不平均分组**

        非平均分组问题当我们取取取时，元素一样多的组有序，元素不一样多的组无序

    3. 有序 $\rightarrow$ 无序：去序

        无序 $\rightarrow$ 有序：加序

    4. 例：12人，分3组，派往A,B,C三个路口

        1. 4+4+4，派往路口ABC

            先分组： $\frac{C_{12}^4C_8^4C_4^4}{A_3^3}$

            再排序 $A_3^3$

            即 $C_{12}^4C_8^4C_4^4$

        2. 6+3+3，派往路口ABC

            先分组： $\frac{C_{12}^6C_6^3C_3^3}{A_2^2}$

            再排序 $A_3^3$

            即 $\frac{C_{12}^6C_6^3C_3^3}{A_2^2}A_3^3$

        3. 6+3+3，派往路口ABC, 要求 A 有6人，BC各3人

            先分组： $\frac{C_{12}^6C_6^3C_3^3}{A_2^2}$

            再排序： $C_1^1A_2^2$

            即 $\frac{C_{12}^6C_6^3C_3^3}{A_2^2}C_1^1A_2^2$

        4. 6+3+3，派往路口ABC，要求 A 有3人

            先分组： $\frac{C_{12}^6C_6^3C_3^3}{A_2^2}$

            再排序： $C_2^1A_2^2$

            即 $\frac{C_{12}^6C_6^3C_3^3}{A_2^2}C_2^1A_2^2$

    类型二：四色地图问题

    1. 按照同组不相邻的原则进行分组，数出分组数量 $m$
    2. 排序 $A_4^4$
    3. 即 $mA_4^4$ 种方案
    4. [例题34](./%E6%8E%92%E5%88%97%E7%BB%84%E5%90%88%E5%85%B8%E5%9E%8B%E9%A2%98%E7%9B%AE.md#34) [例题35](./%E6%8E%92%E5%88%97%E7%BB%84%E5%90%88%E5%85%B8%E5%9E%8B%E9%A2%98%E7%9B%AE.md#35) 

3. 插棍问题

    $a_1+a_2+\cdots + a_n = N$

    1. 正整数解一共有 $C_{N-1}^{n-1}$ 个解
    2. 非负整数解一共有 $C_{N+n-1}^{n-1}$ 个解
    3. 例 $x+y+z+w=100$，正整数解一共有 $C_{99}^{3}$ 个，非负整数解一共有 $C_{103}^{3}$ 个解